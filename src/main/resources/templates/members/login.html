<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>login</title>
  <link rel="stylesheet" href="/css/common.css">
  <script src="/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=16wspb9c04"></script>
</head>
<body>
    <main class="login_page clear">
        <div class="login_left">
            <div class="title_txt">
                <img src="/images/bi_cudo.png" alt="CUDO COMMUNICATON">
                <strong>더미디어 사업부</strong>
                <div id="map" style="width:100%;height:400px;"></div>
            </div>
        </div>
        <form id="login_form" th:action="@{/login_sumbit}" method="post">
            <div class="login_right">
                <div class="login_box">
                    <strong>LOGIN</strong>
                    <em>더미디어 사업부</em>
                    <p>계정 신청은 담당자에게 요청 바랍니다.</p>
                    <div class="login_inp">
                        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                        <label for="id">아이디</label>
                        <input type="text" id="id" name="username" placeholder="아이디를 입력해주세요.">
                        <label for="psw">비밀번호</label>
                        <input type="password" id="psw" name="password" placeholder="비밀번호를 입력해주세요.">
                    </div>
                    <input type="button" class="login_btn modal_btn" onclick="login_check();" value="로그인"></input>
                </div>
                <ul class="adress_list clear">
                    <li>
                        <h1>
                            <img src="/images/bi_login.png" alt="">
                        </h1>
                    </li>
                    <li>Copyright 2020 CUDO Communication. All rights reserved.</li>
                </ul>
            </div>
        </form>
<!-- layer_position 에 active 클래스 추가시 표출됩니다 -->
        <div class="layer_position">
            <div class="pop_back"></div>
            <div class="modal_con">
                <p class="modal_txt">아이디 또는 비밀번호가 잘못 입력 되었습니다.</p>
                <p class="col_purple text_center">(회원 가입 승인 완료 후 이용 가능합니다.)</p>
                <div class="btn_center">
                    <button class="blue_btn w_120 modal_close">확인</button>
                </div>
            </div>
        </div>
    </main>
<script th:inline="javascript">
    $(document).ready(function () {
        if(/*[[${param.error}]]*/){
            $('.layer_position').addClass('active');
        }

        var map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(37.48519, 126.99566),
            zoom: 19
        });

        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(37.48519, 126.99566),
            map: map
        });
    });

    $(function(){
        $('.modal_btn').on('click', function () {
            $('.layer_position').addClass('active');
        })
    })

    function error_context_active(){
        $('.modal_btn').on('click', function () {
            $('.layer_position').addClass('active');
        })
    }

    function error_context_remove(){
        $('.modal_btn').on('click', function () {
            $('.layer_position').removeClass('active');
        })
    }

    function login_check() {
        var id = document.getElementById('id').value;
        var pw = document.getElementById('psw').value;

        console.log(id === "" || pw ==="");
        if(id === "" || pw ===""){
            error_context_active();
        }
        else {
            error_context_remove();
            document.getElementById('login_form').submit();
        }
    }
</script>
<script src="/js/common.js"></script>
</body>
</html>
